{% extends "base/base_template.html" %}

{% block title %}
Make Exam Result
{% endblock title %}

{% block content %}


<form method="GET" class="mb-5">
    <select class="form-select bg-white" name="student_class" id="student_class" onchange="this.form.submit()">
        <option selected disabled>Choose Class</option>
        {% for i in student_classes %}
        <option {% if i.id == student_class %}selected{% endif %} value="{{ i.id }}">Class {{ i.number }}</option>
        {% endfor %}
    </select>
</form>


{% if student_class %}
<form method="POST" class="mt-5">
    {% csrf_token %}

    <div class="row mb-5">
        <div class="col-md-4">
            <label class="form-label fw-bold fs-6" for="subject">Subject</label>
            <select name="subject" id="subject" class="form-select bg-white" required>
                <option value="">Select Subject</option>
                {% for subject in subjects %}
                <option value="{{ subject.id }}">{{ subject.name }}</option>
                {% endfor %}
            </select>
            <div class="invalid-feedback">Subject is required.</div>
        </div>
        <div class="col-md-4">
            <label class="form-label fw-bold fs-6" for="subject">Total Mark</label>
            <input type="number" class="form-control bg-white" name="total_mark" id="total_mark" required>
            <div class="invalid-feedback">Subject is required.</div>
        </div>
        <div class="col-md-4">
            <label class="form-label fw-bold fs-6" for="remarks">Remarks</label>
            <input type="text" class="form-control bg-white" name="remarks" id="remarks">
            <div class="invalid-feedback">Remarks are required.</div>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table">
            <tr>
                <th>Name</th>
                <th>Roll</th>
                <th>Obtained Mark</th>
            </tr>
            {% for student in students %}
            <tr>
                <td>{{ student.name }}</td>
                <td>{{ student.roll_no }}</td>
                <td>
                    <input type="number" value=0 required name="obtained_mark_{{ student.id }}" class="form-control">
                </td>
            </tr>
            {% endfor %}
        </table>
        </div>
    <button class="btn btn-primary" type="submit">Make Result</button>
</form>
{% else %}
<div class="h-50 bg-black text-white fs-1 card oswald h-100 m-auto pt-5 text-center">Select a class.</div>
{% endif %}





{% endblock content %}